<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GAIN AUNTU ‚Äî Profile & CV</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f14; --card:#121922; --text:#e6edf3; --muted:#9fb2c7;
      --accent:#4da3ff; --chip:#1b2633; --border:#223041;
      --accent-2:#8a7dff; --accent-3:#00e6b8;
      --ring: drop-shadow(0 0 8px rgba(77,163,255,.35)) drop-shadow(0 0 22px rgba(0,230,184,.18));
      --focus: 0 0 0 3px rgba(77,163,255,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text);
      background:#0b0f14;
      overflow-x:hidden;
      position:relative;
    }
    /* Subtle 3D parallax glow layer */
    body::before{
      content:"";position:fixed;inset:-50%;z-index:-1;
      background:radial-gradient(800px 600px at 20% 15%, rgba(77,163,255,.12), transparent 70%),
                 radial-gradient(800px 600px at 80% 85%, rgba(0,230,184,.1), transparent 70%);
      transform:translate3d(0,0,0);
      transition:background 1.2s ease;
    }
    @supports (zoom:1){body{zoom:1.07}} 
    @supports not (zoom:1){.wrap{transform:scale(1.07);transform-origin:top center;width:calc(100%/1.07)}}
    .wrap{max-width:980px;margin:0 auto;padding:24px 18px 64px;position:relative;}

    header{
      display:flex;align-items:center;justify-content:space-between;gap:12px;padding:18px;
      background:linear-gradient(180deg, rgba(18,25,34,.7), rgba(18,25,34,.6));
      border:1px solid var(--border);border-radius:16px;position:sticky;top:10px;z-index:5;
      backdrop-filter:saturate(140%) blur(8px);
      box-shadow:0 10px 30px rgba(0,0,0,.35);
    }
    .id{display:flex;align-items:center;gap:14px;}
    .avatar{width:48px;height:48px;border-radius:12px;
      background:conic-gradient(from 0deg, rgba(77,163,255,.35), rgba(0,230,184,.25), rgba(138,125,255,.3), rgba(77,163,255,.35)),
                 linear-gradient(135deg,#2a3a4f,#1f2a38);
      display:grid;place-items:center;font-weight:700;filter:var(--ring);
      animation: spinAccent 8s linear infinite;
    }
    @keyframes spinAccent{to{transform:rotate(1turn)}}
    .id h1{font-size:20px;line-height:1.2;margin:0}
    .id p{margin:0;color:var(--muted);font-size:13px}
    .links a{color:var(--accent)}
    .right-rail{display:flex;flex-direction:column;gap:10px;align-items:flex-end}
    .lang-group{display:flex;flex-direction:column;align-items:flex-start;gap:10px;}

    .lang-switch,.theme-switch{display:inline-flex;border:1px solid var(--border);background:var(--chip);
      border-radius:14px;padding:5px;gap:5px;position:relative;overflow:hidden;}
    .lang-switch button,.theme-switch button{appearance:none;border:0;padding:9px 13px;border-radius:10px;
      background:transparent;color:var(--text);font-weight:600;cursor:pointer;font-size:13px;
      transition:transform .12s ease,background .2s ease,box-shadow .15s ease;}
    .lang-switch button:hover,.theme-switch button:hover{transform:translateY(-1px);}
    .lang-switch button.active,.theme-switch button.active{
      background:linear-gradient(135deg,rgba(77,163,255,.9),rgba(0,230,184,.9));color:#001428;
      box-shadow:0 0 0 1px rgba(0,0,0,.25) inset;text-shadow:0 1px 0 rgba(255,255,255,.25);
    }

    .actions{display:flex;gap:8px;}
    .btn{appearance:none;border:1px solid var(--border);background:var(--chip);color:var(--text);
      padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:13px;
      transition:transform .12s ease,box-shadow .15s ease,background .2s ease;}
    .btn:hover{transform:translateY(-1px);}
    .btn-accent{background:linear-gradient(135deg,rgba(77,163,255,.9),rgba(0,230,184,.9));color:#001428;}

    main{margin-top:18px;display:grid;gap:16px}
    section{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:12px}
    [data-lang]{display:none;opacity:0;transform:translateY(6px);transition:opacity .28s ease,transform .28s ease;}
    [data-lang][data-show="true"]{display:block;opacity:1;transform:translateY(0);}
    .viewer .pdf-wrap{position:relative;border-radius:12px;overflow:hidden;background:transparent}
    .viewer .pdf-frame{width:100%;height:84vh;border:0;display:block;opacity:0;transition:opacity .25s ease}
    .viewer .pdf-frame.ready{opacity:1}
    .viewer.viewer-dark .pdf-frame{filter:invert(0.92) hue-rotate(180deg)}

    .viewer .iframe-shell{border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff;padding:20px 24px;position:relative}
    .viewer.viewer-dark .iframe-shell{background:#0f1622;}
    .viewer .kr{width:100%;height:84vh;border:0;display:block;background:transparent}
    .viewer.viewer-dark .kr{filter:invert(0.92) hue-rotate(180deg)}
    .loader{position:absolute;inset:0;display:grid;place-items:center;pointer-events:none;opacity:0;transform:scale(.98);transition:opacity .25s ease,transform .25s ease;}
    .loader.show{opacity:1;transform:scale(1);}
    .ring{width:36px;height:36px;border-radius:50%;background:conic-gradient(from 0deg,var(--accent),var(--accent-2),var(--accent-3),var(--accent));-webkit-mask:radial-gradient(farthest-side,transparent 55%,#000 56%);mask:radial-gradient(farthest-side,transparent 55%,#000 56%);animation:spin 1s linear infinite;filter:var(--ring);}
    @keyframes spin{to{transform:rotate(1turn)}}
    .foot{margin-top:24px;color:var(--muted);font-size:12px;text-align:center}
  </style>
  <style id="han-font-fix">
    #btn-ko {font-family:'Noto Sans KR',system-ui,sans-serif!important;line-height:1;position:relative;top:-1px;}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="id">
        <div class="avatar">AG</div>
        <div>
          <h1>GAIN AUNTU</h1>
          <p>Embedded Systems & Computer Vision ‚Ä¢ Suwon, Korea</p>
          <div class="links" style="margin-top:6px; font-size:13px">
            <a href="mailto:gainauntu@gmail.com">gainauntu@gmail.com</a> ¬∑
            <a href="tel:+821028186879">(+82) 10-2818-6879</a> ¬∑
            <a href="https://github.com/gainauntu" target="_blank" rel="noreferrer">GitHub</a> ¬∑
            <a href="https://www.linkedin.com/in/gainauntu/">LinkedIn</a>
          </div>
        </div>
      </div>

      <div class="right-rail">
        <div class="lang-group">
          <div class="lang-switch">
            <button id="btn-en" class="active" data-target="en">EN</button>
            <button id="btn-ko" data-target="ko">Ìïú</button>
          </div>
          <div class="theme-switch">
            <button id="theme-light">‚òÄÔ∏è</button>
            <button id="theme-dark">üåô</button>
          </div>
        </div>
        <div class="actions">
          <button id="btn-copy-email" class="btn">Copy Email</button>
          <a id="btn-download-pdf" class="btn btn-accent" href="CV_AUNTU_GAIN.pdf" download>Download PDF</a>
        </div>
      </div>
    </header>

    <main>
      <div id="viewer" class="viewer">
        <!-- English -->
        <section data-lang="en" data-show="true" id="en-cv">
          <div class="pdf-wrap">
            <div class="loader show" id="pdfLoader"><div class="ring"></div></div>
            <iframe class="pdf-frame" id="pdfFrame"
              src="CV_AUNTU_GAIN.pdf#toolbar=0&navpanes=0&statusbar=0&view=FitH"
              title="CV PDF"></iframe>
          </div>
        </section>

        <!-- Korean -->
        <section data-lang="ko" data-show="false" id="kr">
          <div class="iframe-shell">
            <div class="loader" id="krLoader"><div class="ring"></div></div>
            <iframe id="krFrame" class="kr" title="ÌïúÍµ≠Ïñ¥ ÌéòÏù¥ÏßÄ"></iframe>
          </div>
        </section>
      </div>
      <div class="foot">¬© <span id="y"></span> GAIN AUNTU</div>
    </main>
  </div>

<script>
(function(){
  const btnEn=document.getElementById('btn-en'),btnKo=document.getElementById('btn-ko'),
  themeLight=document.getElementById('theme-light'),themeDark=document.getElementById('theme-dark'),
  viewer=document.getElementById('viewer'),pdfFrame=document.getElementById('pdfFrame'),
  krFrame=document.getElementById('krFrame'),pdfLoader=document.getElementById('pdfLoader'),
  krLoader=document.getElementById('krLoader'),btnCopyEmail=document.getElementById('btn-copy-email'),
  btnDownloadPDF=document.getElementById('btn-download-pdf');
  const KR_URL='KOREAN_AUNTU.html';
  let krLoaded=false;

  function showLang(lang){
    localStorage.setItem('ga_lang',lang);
    btnEn.classList.toggle('active',lang==='en');btnKo.classList.toggle('active',lang==='ko');
    document.querySelectorAll('[data-lang]').forEach(e=>e.setAttribute('data-show',String(e.dataset.lang===lang)));
    if(lang==='en') tryReloadPDF();
    if(lang==='ko'&&!krLoaded){
      if(krLoader)krLoader.classList.add('show');
      krFrame.src=KR_URL;krLoaded=true;
      setTimeout(()=>{syncKRTheme();resizeKR();},250);
    }
  }

  function applyViewerTheme(theme){
    localStorage.setItem('ga_viewer_theme',theme);
    const dark=theme==='dark';
    viewer.classList.toggle('viewer-dark',dark);
    themeLight.classList.toggle('active',!dark);
    themeDark.classList.toggle('active',dark);
    syncKRTheme();
  }

  function tryReloadPDF(){
    const s=pdfFrame.getAttribute('src');if(s)pdfFrame.setAttribute('src',s);
  }

  function syncKRTheme(){
    try{
      const dark=viewer.classList.contains('viewer-dark');
      const doc=krFrame.contentDocument||krFrame.contentWindow.document;
      if(doc&&doc.documentElement){
        doc.documentElement.classList.toggle('theme-dark',dark);
        doc.documentElement.classList.toggle('theme-light',!dark);
      }
    }catch(e){}
  }
  function resizeKR(){
    try{
      const d=krFrame.contentDocument||krFrame.contentWindow.document;
      const h=Math.max(d.body.scrollHeight,d.documentElement.scrollHeight);
      if(h>600)krFrame.style.height=Math.min(h+20,window.innerHeight*1.5)+'px';
    }catch(e){}
  }

  btnEn.onclick=()=>showLang('en');
  btnKo.onclick=()=>showLang('ko');
  themeLight.onclick=()=>applyViewerTheme('light');
  themeDark.onclick=()=>applyViewerTheme('dark');
  if(krFrame)krFrame.addEventListener('load',()=>{if(krLoader)krLoader.classList.remove('show');syncKRTheme();resizeKR();});
  window.addEventListener('resize',resizeKR);

  if(btnCopyEmail)btnCopyEmail.onclick=()=>{navigator.clipboard.writeText('gainauntu@gmail.com');btnCopyEmail.textContent='Copied!';setTimeout(()=>btnCopyEmail.textContent='Copy Email',1200);};

  // === Enhanced PDF loader with retry & fallback ===
  if(pdfFrame){
    let retried=false;
    const fallback=document.createElement('div');
    fallback.style='display:none;text-align:center;margin-top:10px;';
    fallback.innerHTML=`<a href="CV_AUNTU_GAIN.pdf" target="_blank">Open PDF manually</a>`;
    pdfFrame.parentElement.appendChild(fallback);
    const finish=()=>{clearTimeout(timer);if(pdfLoader)pdfLoader.classList.remove('show');pdfFrame.classList.add('ready');};
    pdfFrame.addEventListener('load',finish);
    let timer=setTimeout(()=>{
      if(!pdfFrame.classList.contains('ready')){
        if(!retried){
          retried=true;
          console.warn('PDF viewer not ready ‚Äî retrying once...');
          const s=pdfFrame.getAttribute('src');
          pdfFrame.removeAttribute('src');
          setTimeout(()=>{pdfFrame.setAttribute('src',s);},500);
          timer=setTimeout(()=>{
            if(!pdfFrame.classList.contains('ready')){
              console.warn('PDF inline render still timed out; showing fallback link.');
              if(pdfLoader)pdfLoader.classList.remove('show');
              fallback.style.display='block';
            }
          },10000);
        }else{
          if(pdfLoader)pdfLoader.classList.remove('show');
          fallback.style.display='block';
        }
      }
    },10000);
  }

  const savedTheme=localStorage.getItem('ga_viewer_theme')||(window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light');
  applyViewerTheme(savedTheme);
  const savedLang=localStorage.getItem('ga_lang')||'en';showLang(savedLang);
  document.getElementById('y').textContent=new Date().getFullYear();
})();
</script>
</body>
</html>
